### 进程相关概念

####  程序和进程

> **程序**

   是指编译好的二进制文件，不占用系统资源（CPU，内存等等）。这里拓展一下，磁盘和内存的区别，磁盘存储的内容，当关机后还是存在的。但是对于内存，关机后就消失了。然后磁盘分为硬盘和软盘，软盘相对于硬盘记录的信息比较小，一般装在外面；相对来说，硬盘就会装在电脑里面。

### 进程

 在运行期间是要占用系统资源的。（了解时钟中断（多道程序设计模型）概念，多个程序排队使用， 但是相对于单道程序模式相比，时钟中断可以卡住每个程序的时间，轮换使用CPU）

> **并发**

> **单道程序设计**

> **多道程序设计**

####  CPU和MMU

> **存储介质**

网络 - > 硬盘  -> 内存 -> cache（内存） -> 寄存器（在CPU中） 。读取速度越来越快，存储的大小越来越小。

> **CPU**

中央处理器；处理信息的一般步骤，第一步，预取器（预取指令）；第二步，译码器（译码）；第三步，算数逻辑单元 ALU （执行）（只能进行两种处理，第一种 + ，第二种 <<）；第四步，回写数据到寄存器堆。

 当我们从硬盘开始执行一个命令的时候，是先从硬盘一步一步往上走，走到cache，也就是内存，然后内存到CPU进行处理，处理完之后再回写到cache，然后再一步步的返回到硬盘。

> **MMU**

内存管理单元；位于CPU内部，作为一个硬件存在。功能一，虚拟内存与物理内存的映射，功能二，设置修改内存访问级别（级别越高，越容易访问），功能三，进程之间。  虚拟地址，可用的地址空间有4G 。空间映射的时候，是按照page（MMU最小单位）来进行申请的。32位的一个page页面大小是4k。

   对于两个不同的进程，两个相同的程序，包括.text , .data等文件的运行内存在物理内存中是相互独立的。 但是，在内核区，两个相同的程序，两个不同的进程，指向的物理内存是相同的，但是PCB（进程描述符）是不同的。  ？？疑问

  **熟悉虚拟内存的具体分层**

> 进程控制块

 按照结构体进行存储，如果查看具体信息通过 
grep -r "task_struct" /usr/include/

命令来进行查找

重点掌握以下部分：

1. 进程id，系统中每个进程有唯一的id.在linux中，通过pid_t类型来进行存储（非负整数）

2. 进程的状态 ，初始化，就绪态（一般前两个简化为一个就绪态）（等待CPU分配时间片），运行态（占用CPU），挂起态（首先主动放弃CPU，等待除CPU以外的其他资源），终止态。

3. 进程切换时需要保存和回复的一些CPU寄存器。（因为是多道程序设计，当再获得时间轮片的时候，能够保证继续按照上一次的进度继续往下存）。

4. 描述虚拟地址空间信息（与物理地址的映射关系，通过mmu维护一张表）。

5. 描述控制终端的信息。

6. 改变当前进程的工作目录。

7. umask掩码 ，改变文件权限（777）

8. 文件描述符表，包含很多指向file结构体的指针。

9. 和信号相关的信息。

10. 用户id和组id。

11. 会话和进程组。

12. 进程可以使用的资源上限。

    ulimit -a 查看进程可以使用的资源上限
    
    

####  环境变量

  **linux操作系统是一个多任务，多用户的开源操作系统。**

 指在操作系统当中指定操作系统环境的一些参数，因为是一个多用户的操作系统，每个人喜欢的环境是不同的，所以可以通过设置环境变量来实现多用户的这个要求。

> 存储形式

与命令号参数类似，char *[]数组，数组名为environ ，内部存储字符串，NULL作为哨兵结尾。

> 特性

1. 以字符串的形式来表达

2. 统一格式，名 = 值[:值] 

3. 值用来描述进程环境信息 

   PATH（可执行文件的路径） （**在执行shell命令的时候，是首先查看当前PATH环境变量从第前面开始找，找到一个可执行文件的路径，再去执行**）

   SHELL（记录当前会用的命令解析器是哪个）

   LANG（当前使用的语言）

   TEAM（当前终端类型）

   HOME（当前用户主目录的路径）

      使用方法： 

   echo &SHELL 

> 加载位置

​    与命令行参数类似。位于用户区，高于stack的位置。

> 引入环境变量表

 必须提前声明环境变量。 extern char **environ ;

ps：如果是date命令，并不是直接执行date命令；而是shell解析器去bin目录下执行了date命令. 

练习：打印当前进程的所有环境变量。 